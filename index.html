<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Приглашение</title>
  <link rel="stylesheet" href="css/konvert.css">
  <link rel="stylesheet" href="css/fonts.css">
  <link rel="stylesheet" href="css/main.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body>
  <audio id="music-player" loop preload="auto">
    <source src="audio/attestat.mp3" type="audio/mpeg">
    Ваш браузер не поддерживает аудио.
  </audio>
  <div class="invite">
    <div class="envelope" id="envelope">
      <!-- Тексты -->
      <div class="top-text">Приглашаем на <br> нашу свадьбу <img class="small-heart" src="img/heart_small.png" alt=""></div>
      <div class="bottom-text">With love, <br><p class="bottom-text2">Илья и Маргарита</p></div>

      <!-- Створки конверта -->
   <svg class="envelope-lines" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
      <!-- Верхняя левая линия -->
      <line x1="100" y1="140" x2="-90" y2="-100" stroke="#A10000" stroke-width="2"></line>
      <!-- Верхняя правая линия -->
      <line x1="100" y1="140" x2="290" y2="-100" stroke="#A10000" stroke-width="2"></line>
      <!-- Нижняя левая линия -->
      <line x1="40" y1="65" x2="-100" y2="400" stroke="#A10000" stroke-width="2"></line>
      <!-- Нижняя правая линия -->
      <line x1="160" y1="65" x2="300" y2="400" stroke="#A10000" stroke-width="2"></line>
    </svg>

      <!-- Сердце с текстом -->
      <div class="seal" role="button" tabindex="0">Открыть<br>здесь</div>
    </div>

    <div class="content">
      <div class="invitation-inner">

      <!-- Имена -->
      <h1 class="names" data-aos="fade-up">Илюша &amp; Маргоша</h1>

      <!-- Фото с подписями -->
      <div class="photos-container" data-aos="flip-up">
        <img src="img/1.png" alt="">
      </div>

      <!-- Календарь -->
      <div class="calendar" data-aos="flip-up">
        <img src="img/2.png" alt="">
      </div>

      <div class="countdown-container">
      <h2 class="countdown-title" data-aos="fade-up">До встречи через:</h2>
      <div class="countdown" id="countdown" data-aos="fade-up">
        <div class="countdown-box">
          <span class="countdown-number" id="days">00</span>
          <span class="countdown-label">дней</span>
        </div>
        <div class="countdown-separator">:</div>
        <div class="countdown-box">
          <span class="countdown-number" id="hours">00</span>
          <span class="countdown-label">часов</span>
        </div>
        <div class="countdown-separator">:</div>
        <div class="countdown-box">
          <span class="countdown-number" id="minutes">00</span>
          <span class="countdown-label">минут</span>
        </div>
        <div class="countdown-separator">:</div>
        <div class="countdown-box">
          <span class="countdown-number" id="seconds">00</span>
          <span class="countdown-label">секунд</span>
        </div>
      </div>
      <p class="title-second">Дорогие и близкие</p>
      <div class="text-seconds">
        <p class="text-second">Мы хотим разделить с вами один из самых</p>
        <p class="text-second">важных и радостных дней в нашей жизни -</p>
        <p class="text-second">праздник настоящей любви.</p>
        <p class="text-third">Приглашаем вас стать частью <br>нашей свадьбы!</p>
      </div>
      <img src="img/3.jpg" alt="" class="schedule-block">
      <h3 class="title-third">Место<br>проведения</h3>
      <img src="img/sherwud.png" alt="" class="shervud">
      <div class="texts-four">
        <p class="text-four">Наше торжество состоится по адресу:</p>
        <p class="text-four">Московская обл., Пушкинский р-н,</p>
        <p class="text-four">д. Герасимиха, территория Раздолье, 5</p>
      </div>
      <button class="map" id="map">Посмотреть на карте</button>
      <h4 class="dress-code-title">DRESS-CODE</h4>
      <div class="dc-background">
          <img src="img/19.png" alt="" class="dc1">
          <img src="img/20.png" alt="" class="dc1">
          <img src="img/21.png" alt="" class="dc1">
          <img src="img/22.png" alt="" class="dc1">
      </div>
      <div class="dc-background2">
        <img src="img/dc-text1.png" alt="" class="dctext">
        <img src="img/dc-text2.png" alt="" class="dctext">
        <img src="img/dc-text3.png" alt="" class="dctext-last">
      </div>
      <div class="dc-background">
          <img src="img/26.png" alt="" class="dc1">
          <img src="img/27-28.png" alt="" class="dc1">
          <img src="img/29.png" alt="" class="dc1">
      </div>
      <h4 class="wishes-title">Пожелания</h4>
      <img src="img/32.png" alt="" class="wishes-img">
      <img src="img/33.png" alt="" class="wishes-text">
      <img src="img/34.png" alt="" class="wishes-img2">
      <img src="img/35.png" alt="" class="wishes-text">
      
      <div class="wave-slider" data-aos="fade-up">
        <div class="wave-mask"></div>
        <img src="img/T1.jpg" alt="Фото 1" class="slider-img active">
        <img src="img/T2.jpg" alt="Фото 2" class="slider-img">
      </div>

    </div>
    </div>
  </div>
</div>
</body>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  
  <script>
    const tl = gsap.timeline({ paused: true });

   // Анимация разъезда створок (линий)
tl
  .to(".seal", { scale: 0.9, duration: 0.15 })
  .to(".seal", { scale: 1, duration: 0.15 })

  // Исчезновение текстов
  .to(".top-text, .bottom-text", {
    opacity: 0,
    y: -20,
    duration: 0.6,
    ease: "power2.out"
  }, "<")

  // Анимация SVG-линий: масштабируем каждую линию от центра
  .to(".envelope-lines line", {
    scale: 0,
    transformOrigin: "center",
    stagger: 0.1,
    duration: 1.2,
    ease: "power3.out"
  }, "<")

// Исчезновение сердца
  .to(".seal", {
    opacity: 0,
    scale: 0.6,
    duration: 0.1
  }, "-=1")

.to(".envelope", {
    marginTop: 0,
    position:"absolute",
    opacity: 0,
    scale: 0.95,
    duration: 0.8,
    ease: "power2.inOut"
}, "<")

  // Появление контента
  .to(".content", {
    opacity: 1,
    y: 0,
    duration: 0,
    ease: "power2.out"
  }, "-=0.6")

  

    const musicPlayer = document.getElementById('music-player');
    const heart = document.querySelector(".seal");
    heart.addEventListener("click", () => {
      tl.play();
       musicPlayer.play().catch(e => console.log("Автовоспроизведение отклонено:", e));
       setTimeout(() => {
  AOS.init({
    duration: 1000,
    once: true,
    easing: 'ease-in-out',
    offset: 80
  });
}, 1500); // Через 1.5 секунды после загрузки
    });

  function updateCountdown() {
  const targetDate = new Date("2026-07-04T16:00:00").getTime(); // Москва
  const now = new Date().getTime();
  const diff = targetDate - now;

  if (diff <= 0) {
    document.getElementById("countdown").innerHTML = '<div style="font-size: 24px; color: #A10000;">Мы уже женаты! ❤️</div>';
    clearInterval(countdownInterval);
    return;
  }

  const day = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hour = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minute = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const second = Math.floor((diff % (1000 * 60)) / 1000);

  document.getElementById("days").innerText = String(day).padStart(2, '0');
  document.getElementById("hours").innerText = String(hour).padStart(2, '0');
  document.getElementById("minutes").innerText = String(minute).padStart(2, '0');
  document.getElementById("seconds").innerText = String(second).padStart(2, '0');
}

updateCountdown(); // Запускаем сразу
const countdownInterval = setInterval(updateCountdown, 1000);

document.getElementById('map').addEventListener('click', function() {
  window.open('https://yandex.ru/maps/1/moscow-and-moscow-oblast/house/territoriya_razdolye_5/Z04YcQ9kT0wCQFtsfX5zdXVkbA==/?l=trf%2Ctrfe&ll=37.780937%2C56.224790&z=13.94', '_blank'); // Подставь свою ссылку
});


const sliderImgs = document.querySelectorAll('.slider-img');
const waveSlider = document.querySelector('.wave-slider');

const photoPaths = [
  'img/T1.jpg',
  'img/T2.jpg',
  'img/T3.jpg'
];

let currentPhotoIndex = 0;
let activeIndex = 0; // индекс активного изображения

// Функция смены фото с анимацией
const changePhoto = () => {
  // Определяем индексы
  const currentImg = sliderImgs[activeIndex];
  const nextImg = sliderImgs[1 - activeIndex]; // переключаемся между 0 и 1
  
  // Увеличиваем индекс фото
  currentPhotoIndex = (currentPhotoIndex + 1) % photoPaths.length;
  
  // Подготавливаем следующее изображение
  nextImg.src = photoPaths[currentPhotoIndex];
  nextImg.style.zIndex = '2'; // ставим на передний план
  currentImg.style.zIndex = '1'; // убираем на задний
  
  // Анимация: текущее уходит влево, новое приходит справа
  gsap.timeline()
    .to(currentImg, {
      x: -400,
      opacity: 0,
      duration: 0.8,
      ease: "power2.inOut"
    }, 0)
    .fromTo(nextImg, {
      x: 400,
      opacity: 0
    }, {
      x: 0,
      opacity: 1,
      duration: 0.8,
      ease: "power2.inOut",
      onComplete: () => {
        // После анимации переключаем активный индекс
        activeIndex = 1 - activeIndex;
      }
    }, 0);
};

// Функция запуска цикла
const startCycle = () => {
  setTimeout(changePhoto, 800);
  setInterval(changePhoto, 4000);
};

// Проверяем, в зоне ли видимости
const isInViewport = (el) => {
  const rect = el.getBoundingClientRect();
  return (
    rect.top <= window.innerHeight * 1.9 &&
    rect.bottom >= window.innerHeight * 0.9
  );
};

if (isInViewport(waveSlider)) {
  startCycle();
} else {
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          startCycle();
          observer.disconnect();
        }
      });
    },
    { threshold: 0.1 }
  );

  observer.observe(waveSlider);
}
  </script>
</body>
</html>